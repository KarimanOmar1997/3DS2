<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cities in 3D - intro</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.33/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.33/"></script>

    <script type="module">
      const [WebScene, SceneView, FeatureLayer, SceneLayer] = await $arcgis.import([
        "@arcgis/core/WebScene.js",
        "@arcgis/core/views/SceneView.js",
        "@arcgis/core/layers/FeatureLayer.js",
        "@arcgis/core/layers/SceneLayer.js",
      ]);

      /***********************************
       * Load webscene and create a SceneView
       ***********************************/
      const webscene = new WebScene({
        portalItem: {
          id: "8ede93ea9d8d48bc8cdcbea775936a13",
        },
      });

      const view = new SceneView({
        container: "viewDiv",
        map: webscene,
        camera: {
          position: [13.39416389, 52.51696216, 122.38133],
          heading: 81.8,
          tilt: 79.95,
        },
      });

      webscene.when(function () {
        view.environment.lighting.date =
          "Wed May 15 2019 14:50:00 GMT+0200 (Central European Summer Time)";
      });

      /***********************************
       * Add polygon layer with water body
       ***********************************/

      const waterLayer = new FeatureLayer({
        url: "https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/Water_bodies/FeatureServer",
        elevationInfo: {
          mode: "absolute-height",
          offset: -1,
        },
        renderer: {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "water",
                waveDirection: 260,
                color: "#9ccfff",
                waveStrength: "rippled",
                waterbodySize: "medium",
              },
            ],
          },
        },
      });

      webscene.add(waterLayer);

      const palace = new SceneLayer({
        url: "https://tiles.arcgis.com/tiles/OLiydejKCZTGhvWg/arcgis/rest/services/Berlinerschloss_Model/SceneServer/layers/0",
        elevationInfo: {
          mode: "absolute-height",
          offset: -40,
        },
      });

      webscene.add(palace);
    </script>
    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>
  </head>

  <body>
    <div id="viewDiv"></div>
  </body>
</html>